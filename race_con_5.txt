=== GESTOR DE INVENTARIO (CON RACE CONDITION) ===
Ejecución #5
Timestamp: 1762129310
PROBLEMA: Operaciones sobre inventario SIN sincronización

Stock inicial:
Producto 0: 100 unidades
Producto 1: 100 unidades
Producto 2: 100 unidades
Producto 3: 100 unidades
Producto 4: 100 unidades
Producto 5: 100 unidades
Producto 6: 100 unidades
Producto 7: 100 unidades
Producto 8: 100 unidades
Producto 9: 100 unidades

[Thread 1] Intentando vender 10 unidades del Producto 0
[Thread 2] Intentando vender 10 unidades del Producto 0
[Thread 3] Intentando vender 10 unidades del Producto 0
[Thread 5] Intentando vender 10 unidades del Producto 0
[Thread 4] Intentando vender 10 unidades del Producto 0
[Thread 6] Reabasteciendo 30 unidades del Producto 0
[Thread 11] Intentando vender 15 unidades del Producto 5
[Thread 2] ✓ Venta completada: -10 unidades. Producto 0 ahora tiene: 90
[Thread 12] Intentando vender 15 unidades del Producto 5
[Thread 2] Intentando vender 15 unidades del Producto 1
[Thread 3] ✓ Venta completada: -10 unidades. Producto 0 ahora tiene: 90
[Thread 3] Intentando vender 15 unidades del Producto 1
[Thread 5] ✓ Venta completada: -10 unidades. Producto 0 ahora tiene: 90
[Thread 5] Intentando vender 15 unidades del Producto 1
[Thread 7] Reabasteciendo 30 unidades del Producto 0
[Thread 1] ✓ Venta completada: -10 unidades. Producto 0 ahora tiene: 80
[Thread 1] Intentando vender 15 unidades del Producto 1
[Thread 3] ✓ Venta completada: -15 unidades. Producto 1 ahora tiene: 85
[Thread 16] Reabasteciendo 25 unidades del Producto 5
[Thread 10] Reabasteciendo 30 unidades del Producto 0
[Thread 11] ✓ Venta completada: -15 unidades. Producto 5 ahora tiene: 110
[Thread 11] Intentando vender 20 unidades del Producto 6
[Thread 13] Intentando vender 15 unidades del Producto 5
[Thread 2] ✓ Venta completada: -15 unidades. Producto 1 ahora tiene: 70
[Thread 2] Intentando vender 20 unidades del Producto 2
[Thread 11] ✓ Venta completada: -20 unidades. Producto 6 ahora tiene: 80
[Thread 3] Intentando vender 20 unidades del Producto 2
[Thread 17] Reabasteciendo 25 unidades del Producto 5
[Thread 18] Reabasteciendo 25 unidades del Producto 5
[Thread 19] Reabasteciendo 25 unidades del Producto 5
[Thread 20] Reabasteciendo 25 unidades del Producto 5
[Thread 4] ✓ Venta completada: -10 unidades. Producto 0 ahora tiene: 140
[Thread 4] Intentando vender 15 unidades del Producto 1
[Thread 5] ✓ Venta completada: -15 unidades. Producto 1 ahora tiene: 70
[Thread 5] Intentando vender 20 unidades del Producto 2
[Thread 9] Reabasteciendo 30 unidades del Producto 0
[Thread 7] ✓ Reabastecimiento completado: +30 unidades. Producto 0 ahora tiene: 140
[Thread 7] Reabasteciendo 20 unidades del Producto 1
[Thread 16] ✓ Reabastecimiento completado: +25 unidades. Producto 5 ahora tiene: 120
[Thread 16] Reabasteciendo 30 unidades del Producto 6
[Thread 14] Intentando vender 15 unidades del Producto 5
[Thread 9] ✓ Reabastecimiento completado: +30 unidades. Producto 0 ahora tiene: 170
[Thread 9] Reabasteciendo 20 unidades del Producto 1
[Thread 15] Intentando vender 15 unidades del Producto 5
[Thread 11] Intentando vender 10 unidades del Producto 7
[Thread 2] ✓ Venta completada: -20 unidades. Producto 2 ahora tiene: 40
[Thread 2] Intentando vender 5 unidades del Producto 3
[Thread 8] Reabasteciendo 30 unidades del Producto 0
[Thread 17] ✓ Reabastecimiento completado: +25 unidades. Producto 5 ahora tiene: 105
[Thread 17] Reabasteciendo 30 unidades del Producto 6
[Thread 6] ✓ Reabastecimiento completado: +30 unidades. Producto 0 ahora tiene: 170
[Thread 6] Reabasteciendo 20 unidades del Producto 1
[Thread 20] ✓ Reabastecimiento completado: +25 unidades. Producto 5 ahora tiene: 105
[Thread 20] Reabasteciendo 30 unidades del Producto 6
[Thread 4] ✓ Venta completada: -15 unidades. Producto 1 ahora tiene: 75
[Thread 4] Intentando vender 20 unidades del Producto 2
[Thread 5] ✓ Venta completada: -20 unidades. Producto 2 ahora tiene: 40
[Thread 5] Intentando vender 5 unidades del Producto 3
[Thread 13] ✓ Venta completada: -15 unidades. Producto 5 ahora tiene: 105
[Thread 13] Intentando vender 20 unidades del Producto 6
[Thread 16] ✓ Reabastecimiento completado: +30 unidades. Producto 6 ahora tiene: 140
[Thread 16] Reabasteciendo 15 unidades del Producto 7
[Thread 3] ✓ Venta completada: -20 unidades. Producto 2 ahora tiene: 20
[Thread 3] Intentando vender 5 unidades del Producto 3
[Thread 15] ✓ Venta completada: -15 unidades. Producto 5 ahora tiene: 105
[Thread 15] Intentando vender 20 unidades del Producto 6
[Thread 11] ✓ Venta completada: -10 unidades. Producto 7 ahora tiene: 90
[Thread 11] Intentando vender 25 unidades del Producto 8
[Thread 2] ✓ Venta completada: -5 unidades. Producto 3 ahora tiene: 90
[Thread 2] Intentando vender 25 unidades del Producto 4
[Thread 8] ✓ Reabastecimiento completado: +30 unidades. Producto 0 ahora tiene: 200
[Thread 8] Reabasteciendo 20 unidades del Producto 1
[Thread 17] ✓ Reabastecimiento completado: +30 unidades. Producto 6 ahora tiene: 120
[Thread 17] Reabasteciendo 15 unidades del Producto 7
[Thread 6] ✓ Reabastecimiento completado: +20 unidades. Producto 1 ahora tiene: 95
[Thread 6] Reabasteciendo 40 unidades del Producto 2
[Thread 7] ✓ Reabastecimiento completado: +20 unidades. Producto 1 ahora tiene: 95
[Thread 7] Reabasteciendo 40 unidades del Producto 2
[Thread 14] ✓ Venta completada: -15 unidades. Producto 5 ahora tiene: 105
[Thread 14] Intentando vender 20 unidades del Producto 6
[Thread 9] ✓ Reabastecimiento completado: +20 unidades. Producto 1 ahora tiene: 115
[Thread 9] Reabasteciendo 40 unidades del Producto 2
[Thread 13] ✓ Venta completada: -20 unidades. Producto 6 ahora tiene: 120
[Thread 13] Intentando vender 10 unidades del Producto 7
[Thread 16] ✓ Reabastecimiento completado: +15 unidades. Producto 7 ahora tiene: 120
[Thread 16] Reabasteciendo 40 unidades del Producto 8
[Thread 3] ✓ Venta completada: -5 unidades. Producto 3 ahora tiene: 85
[Thread 3] Intentando vender 25 unidades del Producto 4
[Thread 15] ✓ Venta completada: -20 unidades. Producto 6 ahora tiene: 100
[Thread 15] Intentando vender 10 unidades del Producto 7
[Thread 11] ✓ Venta completada: -25 unidades. Producto 8 ahora tiene: 75
[Thread 11] Intentando vender 15 unidades del Producto 9
[Thread 13] ✓ Venta completada: -10 unidades. Producto 7 ahora tiene: 110
[Thread 13] Intentando vender 25 unidades del Producto 8
[Thread 8] ✓ Reabastecimiento completado: +20 unidades. Producto 1 ahora tiene: 115
[Thread 8] Reabasteciendo 40 unidades del Producto 2
[Thread 17] ✓ Reabastecimiento completado: +15 unidades. Producto 7 ahora tiene: 110
[Thread 17] Reabasteciendo 40 unidades del Producto 8
[Thread 19] ✓ Reabastecimiento completado: +25 unidades. Producto 5 ahora tiene: 105
[Thread 19] Reabasteciendo 30 unidades del Producto 6
[Thread 11] ✓ Venta completada: -15 unidades. Producto 9 ahora tiene: 85
[Thread 1] ✓ Venta completada: -15 unidades. Producto 1 ahora tiene: 115
[Thread 1] Intentando vender 20 unidades del Producto 2
[Thread 12] ✓ Venta completada: -15 unidades. Producto 5 ahora tiene: 105
[Thread 12] Intentando vender 20 unidades del Producto 6
[Thread 10] ✓ Reabastecimiento completado: +30 unidades. Producto 0 ahora tiene: 200
[Thread 10] Reabasteciendo 20 unidades del Producto 1
[Thread 2] ✓ Venta completada: -25 unidades. Producto 4 ahora tiene: 50
[Thread 16] ✓ Reabastecimiento completado: +40 unidades. Producto 8 ahora tiene: 155
[Thread 4] ✓ Venta completada: -20 unidades. Producto 2 ahora tiene: 100
[Thread 4] Intentando vender 5 unidades del Producto 3
[Thread 5] ✓ Venta completada: -5 unidades. Producto 3 ahora tiene: 85
[Thread 5] Intentando vender 25 unidades del Producto 4
[Thread 12] ✓ Venta completada: -20 unidades. Producto 6 ahora tiene: 80
[Thread 12] Intentando vender 10 unidades del Producto 7
[Thread 15] ✓ Venta completada: -10 unidades. Producto 7 ahora tiene: 110
[Thread 15] Intentando vender 25 unidades del Producto 8
[Thread 18] ✓ Reabastecimiento completado: +25 unidades. Producto 5 ahora tiene: 105
[Thread 18] Reabasteciendo 30 unidades del Producto 6
[Thread 10] ✓ Reabastecimiento completado: +20 unidades. Producto 1 ahora tiene: 135
[Thread 10] Reabasteciendo 40 unidades del Producto 2
[Thread 6] ✓ Reabastecimiento completado: +40 unidades. Producto 2 ahora tiene: 80
[Thread 6] Reabasteciendo 10 unidades del Producto 3
[Thread 7] ✓ Reabastecimiento completado: +40 unidades. Producto 2 ahora tiene: 80
[Thread 7] Reabasteciendo 10 unidades del Producto 3
[Thread 13] ✓ Venta completada: -25 unidades. Producto 8 ahora tiene: 155
[Thread 13] Intentando vender 15 unidades del Producto 9
[Thread 8] ✓ Reabastecimiento completado: +40 unidades. Producto 2 ahora tiene: 80
[Thread 8] Reabasteciendo 10 unidades del Producto 3
[Thread 4] ✓ Venta completada: -5 unidades. Producto 3 ahora tiene: 80
[Thread 5] ✓ Venta completada: -25 unidades. Producto 4 ahora tiene: 25
[Thread 17] ✓ Reabastecimiento completado: +40 unidades. Producto 8 ahora tiene: 155
[Thread 17] Reabasteciendo 20 unidades del Producto 9
[Thread 12] ✓ Venta completada: -10 unidades. Producto 7 ahora tiene: 100
[Thread 12] Intentando vender 25 unidades del Producto 8
[Thread 20] ✓ Reabastecimiento completado: +30 unidades. Producto 6 ahora tiene: 80
[Thread 20] Reabasteciendo 15 unidades del Producto 7
[Thread 19] ✓ Reabastecimiento completado: +30 unidades. Producto 6 ahora tiene: 110
[Thread 19] Reabasteciendo 15 unidades del Producto 7
[Thread 15] ✓ Venta completada: -25 unidades. Producto 8 ahora tiene: 130
[Thread 15] Intentando vender 15 unidades del Producto 9
[Thread 1] ✓ Venta completada: -20 unidades. Producto 2 ahora tiene: 120
[Thread 1] Intentando vender 5 unidades del Producto 3
[Thread 18] ✓ Reabastecimiento completado: +30 unidades. Producto 6 ahora tiene: 110
[Thread 18] Reabasteciendo 15 unidades del Producto 7
[Thread 15] ✓ Venta completada: -15 unidades. Producto 9 ahora tiene: 90
[Thread 10] ✓ Reabastecimiento completado: +40 unidades. Producto 2 ahora tiene: 120
[Thread 10] Reabasteciendo 10 unidades del Producto 3
[Thread 6] ✓ Reabastecimiento completado: +10 unidades. Producto 3 ahora tiene: 95
[Thread 6] Reabasteciendo 35 unidades del Producto 4
[Thread 14] ✓ Venta completada: -20 unidades. Producto 6 ahora tiene: 110
[Thread 14] Intentando vender 10 unidades del Producto 7
[Thread 7] ✓ Reabastecimiento completado: +10 unidades. Producto 3 ahora tiene: 95
[Thread 7] Reabasteciendo 35 unidades del Producto 4
[Thread 13] ✓ Venta completada: -15 unidades. Producto 9 ahora tiene: 90
[Thread 1] ✓ Venta completada: -5 unidades. Producto 3 ahora tiene: 90
[Thread 1] Intentando vender 25 unidades del Producto 4
[Thread 18] ✓ Reabastecimiento completado: +15 unidades. Producto 7 ahora tiene: 130
[Thread 18] Reabasteciendo 40 unidades del Producto 8
[Thread 9] ✓ Reabastecimiento completado: +40 unidades. Producto 2 ahora tiene: 120
[Thread 9] Reabasteciendo 10 unidades del Producto 3
[Thread 8] ✓ Reabastecimiento completado: +10 unidades. Producto 3 ahora tiene: 90
[Thread 8] Reabasteciendo 35 unidades del Producto 4
[Thread 4] Intentando vender 25 unidades del Producto 4
[Thread 17] ✓ Reabastecimiento completado: +20 unidades. Producto 9 ahora tiene: 90
[Thread 16] Reabasteciendo 20 unidades del Producto 9
[Thread 12] ✓ Venta completada: -25 unidades. Producto 8 ahora tiene: 170
[Thread 12] Intentando vender 15 unidades del Producto 9
[Thread 10] ✓ Reabastecimiento completado: +10 unidades. Producto 3 ahora tiene: 100
[Thread 10] Reabasteciendo 35 unidades del Producto 4
[Thread 6] ✓ Reabastecimiento completado: +35 unidades. Producto 4 ahora tiene: 35
[Thread 16] ✓ Reabastecimiento completado: +20 unidades. Producto 9 ahora tiene: 110
[Thread 14] ✓ Venta completada: -10 unidades. Producto 7 ahora tiene: 105
[Thread 12] ✓ Venta completada: -15 unidades. Producto 9 ahora tiene: 75
[Thread 1] ✓ Venta completada: -25 unidades. Producto 4 ahora tiene: 35
[Thread 10] ✓ Reabastecimiento completado: +35 unidades. Producto 4 ahora tiene: 70
[Thread 18] ✓ Reabastecimiento completado: +40 unidades. Producto 8 ahora tiene: 170
[Thread 9] ✓ Reabastecimiento completado: +10 unidades. Producto 3 ahora tiene: 100
[Thread 9] Reabasteciendo 35 unidades del Producto 4
[Thread 4] ✓ Venta completada: -25 unidades. Producto 4 ahora tiene: 70
[Thread 20] ✓ Reabastecimiento completado: +15 unidades. Producto 7 ahora tiene: 105
[Thread 20] Reabasteciendo 40 unidades del Producto 8
[Thread 14] Intentando vender 25 unidades del Producto 8
[Thread 7] ✓ Reabastecimiento completado: +35 unidades. Producto 4 ahora tiene: 70
[Thread 18] Reabasteciendo 20 unidades del Producto 9
[Thread 8] ✓ Reabastecimiento completado: +35 unidades. Producto 4 ahora tiene: 105
[Thread 3] ✓ Venta completada: -25 unidades. Producto 4 ahora tiene: 105
[Thread 19] ✓ Reabastecimiento completado: +15 unidades. Producto 7 ahora tiene: 105
[Thread 19] Reabasteciendo 40 unidades del Producto 8
[Thread 20] ✓ Reabastecimiento completado: +40 unidades. Producto 8 ahora tiene: 145
[Thread 20] Reabasteciendo 20 unidades del Producto 9
[Thread 18] ✓ Reabastecimiento completado: +20 unidades. Producto 9 ahora tiene: 95
[Thread 14] ✓ Venta completada: -25 unidades. Producto 8 ahora tiene: 145
[Thread 14] Intentando vender 15 unidades del Producto 9
[Thread 9] ✓ Reabastecimiento completado: +35 unidades. Producto 4 ahora tiene: 105
[Thread 19] ✓ Reabastecimiento completado: +40 unidades. Producto 8 ahora tiene: 185
[Thread 19] Reabasteciendo 20 unidades del Producto 9
[Thread 20] ✓ Reabastecimiento completado: +20 unidades. Producto 9 ahora tiene: 95
[Thread 14] ✓ Venta completada: -15 unidades. Producto 9 ahora tiene: 80
[Thread 19] ✓ Reabastecimiento completado: +20 unidades. Producto 9 ahora tiene: 115

=== REPORTE FINAL ===
Tiempo de ejecución: 13ms

Comparación Stock Final vs Esperado:
Producto 0: 200 (esperado: 120) ✗
  → Diferencia: 80 unidades
Producto 1: 135 (esperado: 125) ✗
  → Diferencia: 10 unidades
Producto 2: 120 (esperado: 140) ✗
  → Diferencia: -20 unidades
Producto 3: 100 (esperado: 105) ✗
  → Diferencia: -5 unidades
Producto 4: 105 (esperado: 135) ✗
  → Diferencia: -30 unidades
Producto 5: 105 (esperado: 110) ✗
  → Diferencia: -5 unidades
Producto 6: 110 (esperado: 130) ✗
  → Diferencia: -20 unidades
Producto 7: 105 (esperado: 105) ✓
Producto 8: 185 (esperado: 140) ✗
  → Diferencia: 45 unidades
Producto 9: 115 (esperado: 105) ✗
  → Diferencia: 10 unidades

¿Todos correctos? NO

*** RACE CONDITION DETECTADA ***
Las operaciones concurrentes sin sincronización causaron inconsistencias
LÍNEAS CRÍTICAS:
  - Línea de lectura: int stock_actual = inventario[producto_id]->stock;
  - Línea de escritura: inventario[producto_id]->stock = stock_actual +/- cantidad;
